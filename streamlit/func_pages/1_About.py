import streamlit as st


st.markdown("# 介绍")
st.markdown("""
近年来，全球范围内火灾发生频率逐渐增高，尤其是在工业、城市化进程加速的地区，火灾的发生风险不断提升。根据国家消防局的统计数据，
2024年10月截止到11月12日，全国共接报火灾7.7万起，亡169人、伤256人，直接财产损失5.1亿元。与去年同期相比，起数、亡人数和伤
人数分别上升了0.4%、5%和2.8%。中国每年发生的火灾事故仍然在高位运行，尽管近年来消防安全工作取得了一定进展，但火灾的社会危害依
然严重。尤其是近年来，由于极端天气事件增多、建筑密集、火灾预警系统不完善等因素，火灾事故的发生频率和造成的损失愈发严重。
""")

st.markdown("""
火灾不仅对生命安全构成威胁，还会对社会经济、环境造成巨大的负面影响。例如，大规模火灾可能导致人员伤亡、财产损失以及环境污染，
而在高密度城市或重要基础设施区域发生火灾，则可能引发连锁反应，造成更为严重的后果。因此，提高火灾检测的准确性和响应速度，是现
代消防安全管理的重要目标。
""")

st.markdown("""
中国政府近年来高度重视消防安全问题，大力推动智能消防技术的研究与应用，并通过了一系列的政策和法规。2019年国务院印发《关于深化
消防执法改革的意见》，其中提到消防执法改革的5个方面12项主要任务，在加强事中事后监管方面：完善“互联网+监管”，运用物联网和大数
据技术，实时化、智能化评估消防安全风险，实现精准监管。2021年中华人民共和国应急管理部印发《中华人民共和国消防法》（2021年修订
版），其中第七条提到国家鼓励、支持消防科学研究和技术创新，推广使用先进的消防和应急救援技术、设备 。2022年广东省人民政府印发
《广东省实施<中华人民共和国消防法>办法》，其中第十七条提到，有关部门应当将智慧消防纳入智慧城市总体布局，统一规划、建设和管理，
运用消防大数据应用平台，开展实时智能消防安全监测、评估和预警，实现消防数据归集共享。
""")

st.markdown("""
在这种背景下，火灾目标检测技术应运而生，成为提升火灾监测和预警能力的重要手段。基于计算机视觉、深度学习和图像处理技术的火灾目标
检测系统，通过对实时视频或图像数据的分析，可以在火灾发生的初期准确识别火焰、烟雾等火灾迹象，迅速发出警报，极大地提高了火灾反应
的速度和准确性。这种智能化的火灾检测技术不仅能够显著提高火灾预警的效率，还能在大规模、复杂环境下进行自动化监控，减少人工干预，
从而在火灾应急管理中发挥重要作用。
""")


# 设置页面标题
st.title("系统使用指南")

# 1. 系统概述
st.header("1. 系统概述")
st.write("""
本系统是一个基于 Streamlit 构建的火灾目标检测与用户管理平台，支持普通用户和管理员两种角色。
普通用户可以使用目标检测功能、查看历史记录以及管理个人账户设置；管理员则拥有额外的权限，可以管理所有用户信息。
""")

# 2. 系统功能模块
st.header("2. 系统功能模块")
st.write("系统主要分为以下功能模块：")
st.markdown("""
1. **登录与注册**
2. **目标检测**
3. **历史记录查询**
4. **用户设置**
5. **管理员设置**
""")

# 3. 使用步骤
st.header("3. 使用步骤")

# 3.1 登录与注册
st.subheader("3.1 登录与注册")
st.write("""
1. **登录**
   - 打开系统后，默认进入登录页面。
   - 选择登录身份（普通用户或管理员）。
   - 输入账号（手机号）和密码，点击“登录”按钮。
   - 如果登录成功，系统会根据用户角色跳转到对应的主页面。

2. **注册**
   - 在登录页面点击“注册新账号”按钮，进入注册页面。
   - 填写以下信息：
     - 昵称（可以是任何形式）
     - 账号（手机号，仅支持纯数字）
     - 密码（必须包含字母和数字，且至少8个字符）
     - 真实姓名（必须为中文）
     - 性别（男、女、其他）
     - 邮箱（必须为有效格式）
   - 点击“注册”按钮完成注册，注册成功后自动跳转回登录页面。

3. **忘记密码**
   - 在登录页面点击“忘记密码”按钮，进入密码重置页面。
   - 输入注册时使用的邮箱地址，点击“重置密码”按钮。
   - 系统会发送密码重置链接到您的邮箱（需自行实现邮件发送功能）。
""")

# 3.2 目标检测
st.subheader("3.2 目标检测")
st.write("""
1. **选择输入方式**
   - 登录后，进入目标检测页面。
   - 在侧边栏选择输入方式：
     - 上传图片
     - 上传视频
     - 本地摄像头拍照检测
     - 本地摄像头实时检测

2. **选择模型**
   - 在侧边栏选择预训练的 YOLOv8 模型（如 `yolov8n`、`yolov8s` 等）。

3. **调整置信度阈值**
   - 使用滑块调整置信度阈值，默认值为 0.25。

4. **开始检测**
   - 点击“开始检测”按钮，系统会根据输入方式执行检测。
   - 检测结果会显示在页面上，并提供下载功能。
""")

# 3.3 历史记录查询
st.subheader("3.3 历史记录查询")
st.write("""
1. **查看历史记录**
   - 登录后，点击“历史记录查询”页面。
   - 系统会显示当前用户的所有检测记录，包括：
     - 检测时间
     - 检测类型（图像或视频）
     - 检测结果（类别、置信度）
   - 点击某条记录，可以查看详细信息（如图像或视频预览）。

2. **删除历史记录**
   - 在历史记录页面，选择某条记录并点击“删除”按钮（需自行实现删除功能）。
""")

# 3.4 用户设置
st.subheader("3.4 用户设置")
st.write("""
1. **修改密码**
   - 登录后，点击“设置”页面。
   - 输入当前密码、新密码和确认密码，点击“保存新密码”按钮。

2. **主题设置**
   - 在“设置”页面，选择“浅色模式”或“深色模式”切换主题。

3. **通知设置**
   - 在“设置”页面，勾选是否接收邮件通知和推送通知，点击“保存通知设置”按钮。

4. **退出登录**
   - 在“设置”页面，点击“退出登录”按钮，系统会清除登录状态并跳转回登录页面。
""")

# 3.5 管理员设置
st.subheader("3.5 管理员设置")
st.write("""
1. **查看所有用户**
   - 登录管理员账号后，点击“管理员设置”页面。
   - 选择“查看所有用户”，系统会显示所有注册用户的信息。

2. **修改用户信息**
   - 在“管理员设置”页面，选择“修改用户信息”。
   - 选择要修改的用户，更新其姓名、邮箱、性别或角色，点击“保存修改”按钮。

3. **删除用户**
   - 在“管理员设置”页面，选择“删除用户”。
   - 选择要删除的用户，点击“删除用户”按钮。

4. **添加新用户**
   - 在“管理员设置”页面，选择“添加新用户”。
   - 填写新用户的信息（账号、密码、姓名、性别、邮箱、角色），点击“添加用户”按钮。
""")

# 4. 注意事项
st.header("4. 注意事项")
st.write("""
1. **账号安全**
   - 请妥善保管您的账号和密码，避免泄露。
   - 密码应包含字母和数字，且长度不少于8个字符。

2. **数据存储**
   - 所有检测结果和用户信息均存储在 MySQL 数据库中，确保数据库服务正常运行。

3. **浏览器兼容性**
   - 建议使用最新版本的 Chrome 或 Edge 浏览器访问系统。

4. **网络环境**
   - 确保网络连接稳定，尤其是在上传大文件或使用摄像头功能时。
""")

# 5. 常见问题
st.header("5. 常见问题")
st.write("""
1. **无法登录**
   - 检查账号和密码是否正确。
   - 确保选择正确的登录身份（普通用户或管理员）。

2. **检测结果不准确**
   - 尝试调整置信度阈值。
   - 确保输入图像或视频质量较高。

3. **忘记密码**
   - 使用“忘记密码”功能重置密码。

4. **系统卡顿**
   - 检查网络连接是否正常。
   - 关闭不必要的浏览器标签页，释放系统资源。
""")

# 结尾
st.markdown("---")
st.success("感谢使用本系统！")